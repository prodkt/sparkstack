{
  "name": "client-shuffle",
  "type": "registry:prodkt",
  "files": [
    {
      "path": "prodkt/client-shuffle.tsx",
      "content": "\"use client\"\n\nimport React, { useEffect, useLayoutEffect, useRef, type FC } from \"react\"\nimport clsx from \"clsx\"\nimport { useInView } from \"framer-motion\"\n\nimport {\n  CiscoLogo,\n  CocaColaLogo,\n  DominosLogo,\n  EminemLogo,\n  HellsAngelsLogo2,\n  HmLogo,\n  NexsaleLogo,\n  RevolutionVodkaLogo,\n  SamsungLogo,\n  ShadyLogo,\n  ToyotaLogo,\n  TruwhipLogo,\n} from \"@/registry/logos\"\n\ntype Props = {\n  className?: string\n}\n\nexport const ClientShuffle: FC<Props> = ({ className }) => {\n  const ref = useRef<HTMLDivElement>(null)\n  const inView = useInView(ref)\n\n  const lastChangedIndex = React.useRef<number>(0)\n\n  const [randomIcons, setRandomIcons] = React.useState<IList>([])\n\n  useLayoutEffect(() => {\n    setRandomIcons(list.sort(() => 0.5 - Math.random()).slice(0, 6))\n  }, [])\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout\n    // change one random icon in the list every X seconds.\n    if (inView) {\n      interval = setInterval(() => {\n        setRandomIcons((prev) => {\n          const { changedIndex, newList } = changeOneRandomIcon(\n            prev,\n            list,\n            lastChangedIndex.current\n          )\n          lastChangedIndex.current = changedIndex\n          return newList\n        })\n      }, 2000)\n    }\n\n    return () => clearInterval(interval)\n  }, [randomIcons, inView])\n\n  return (\n    <div className={clsx(className, \"w-full\")} ref={ref}>\n      <div\n        className={clsx(\n          \"not-prose\",\n          \"relative\",\n          \"flex flex-col\",\n          \"items-center\",\n          \"justify-center\",\n          \"w-auto\",\n          \"mx-auto\",\n          \"space-y-5 md:space-y-6\",\n          \"text-center\",\n          \"text-muted\",\n          \"rounded-2xl landing-sm:rounded-3xl\"\n        )}\n      >\n        <p\n          className={clsx(\n            \"whitespace-nowrap\",\n            \"text-xs landing-sm:text-sm uppercase tracking-widest font-mono mt-2 mb-0\",\n            \"text-muted\"\n          )}\n        >\n          Trusted by companies like\n        </p>\n        <div\n          className={clsx(\n            \"flex flex-row flex-wrap md:flex-nowrap\",\n            \"grid grid-cols-3 md:grid-cols-6\",\n            \"w-full\",\n            \"justify-center\",\n            \"items-center\",\n            \"text-balance\",\n            \"gap-2\"\n          )}\n        >\n          {randomIcons.map((item) => (\n            <div\n              key={item.id}\n              className={clsx(\n                \"w-full\",\n                \"px-1\",\n                \"py-0\",\n                \"text-foreground\",\n                \"object-contain\",\n                \"flex-nowrap\",\n                \"lg:basis-1/6\",\n                \"landing-xs:basis-1/6\",\n                \"basis-full\",\n                \"justify-center\",\n                \"items-center\",\n                \"flex auto-cols-max grid-flow-row auto-rows-max grid-cols-4 md:grid-cols-6\",\n                \"overflow-hidden\"\n              )}\n            >\n              <div\n                className={clsx(\n                  \"animate-opacity-reveal\",\n                  \"landing-sm:max-w-[140px]\",\n                  \"landing-xs:max-w-[140px]\",\n                  \"flex\",\n                  \"shrink\",\n                  \"grow-0\",\n                  \"basis-full\",\n                  \"object-contain\",\n                  \"justify-center\",\n                  \"w-full\",\n                  \"items-center\"\n                )}\n              >\n                {item.icon}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// change only one random icon in the list\nconst changeOneRandomIcon = (\n  currentList: IList,\n  list: IList,\n  lastChangedIndex: number\n): { newList: IList; changedIndex: number } => {\n  const newList = [...currentList]\n\n  // pick randomIndex from the current list\n  let randomIndex = Math.floor(Math.random() * newList.length)\n  // if the randomIndex is the same as the last changed index, pick another randomIndex\n  while (randomIndex === lastChangedIndex) {\n    randomIndex = Math.floor(Math.random() * newList.length)\n  }\n\n  // pick randomIcon from the list\n  let randomIcon = list[Math.floor(Math.random() * list.length)]\n  // check if the randomIcon is already in the current list\n  let isExist = newList.find((item) => item.id === randomIcon.id)\n  // if the randomIcon is already in the current list, pick another randomIcon\n  while (isExist) {\n    randomIcon = list[Math.floor(Math.random() * list.length)]\n    isExist = newList.find((item) => item.id === randomIcon.id)\n  }\n\n  // change the randomIcon in the current list\n  newList[randomIndex] = randomIcon\n\n  return { newList, changedIndex: randomIndex }\n}\n\ntype IList = {\n  icon: React.ReactNode\n  id: number\n}[]\n\nconst list: IList = [\n  {\n    icon: <EminemLogo className=\"h-[24px] max-h-[24px] w-14 object-contain\" />,\n    id: 1,\n  },\n  {\n    icon: (\n      <RevolutionVodkaLogo className=\"h-[24px] max-h-[24px] w-14 object-contain\" />\n    ),\n    id: 2,\n  },\n  {\n    icon: (\n      <HellsAngelsLogo2 className=\"h-[24px] max-h-[24px] w-14 object-contain\" />\n    ),\n    id: 3,\n  },\n  {\n    icon: <DominosLogo className=\"h-[24px] max-h-[24px] w-14 object-contain\" />,\n    id: 4,\n  },\n  {\n    icon: <CiscoLogo className=\"h-[24px] max-h-[24px] w-14 object-contain\" />,\n    id: 8,\n  },\n  {\n    icon: <ToyotaLogo className=\"h-[24px] max-h-[24px] w-14 object-contain\" />,\n    id: 9,\n  },\n  {\n    icon: <SamsungLogo className=\"h-[24px] max-h-[24px] w-14 object-contain\" />,\n    id: 10,\n  },\n  {\n    icon: <TruwhipLogo className=\"h-[24px] max-h-[24px] w-14 object-contain\" />,\n    id: 11,\n  },\n  {\n    icon: <NexsaleLogo className=\"h-[24px] max-h-[24px] w-14 object-contain\" />,\n    id: 12,\n  },\n  {\n    icon: (\n      <CocaColaLogo className=\"h-[24px] max-h-[24px] w-14 object-contain\" />\n    ),\n    id: 13,\n  },\n]\n",
      "type": "registry:prodkt",
      "target": ""
    }
  ]
}